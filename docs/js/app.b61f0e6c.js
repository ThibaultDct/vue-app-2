(function(t){function e(e){for(var a,s,o=e[0],c=e[1],u=e[2],p=0,d=[];p<o.length;p++)s=o[p],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(a=!1)}a&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},r={app:0},i=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/vue-app-2/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"03cf":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t._m(0),n("div",{staticClass:"global"},[n("div",{staticClass:"content"},[n("div",{staticClass:"glass"},[n("router-view")],1)])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar"},[a("a",{attrs:{href:"#home"}},[a("img",{attrs:{src:n("cf05"),width:"100px",height:"115px"}})]),a("a",{staticClass:"active",attrs:{href:"#home"}},[t._v("Accueil")]),a("a",{attrs:{href:"#building"}},[t._v("Habitations")]),a("a",{attrs:{href:"#industry"}},[t._v("Industries")]),a("a",{attrs:{href:"#energy"}},[t._v("Energie")]),a("a",{attrs:{href:"#research"}},[t._v("Recherche")])])}],s=(n("96cf"),n("1da1")),o=(n("ac1f"),n("5319"),n("2591")),c=n("bc3a"),u=n.n(c),l="set_user",p="set_city_data",d="set_stock",m=(n("b0c0"),n("2f62"));a["a"].use(m["a"]);var f=new m["a"].Store({state:{user:{},city_data:{},city_id:{},rates:{},stock:{}},mutations:{set_name:function(t,e){return t.name=e},reset_name:function(t){return t.name=""},set_user:function(t,e){return t.user=e.user},reset_user:function(t){return t.user={}},set_city_data:function(t,e){return t.city_data=e.city},reseet_city_data:function(t){return t.city_data={}},set_stock:function(t,e){return t.stock=e.stock},reset_stock:function(t){return t.stock={}}},actions:{set_name:function(t,e){t.commit("set_name",e)},reset_name:function(t){t.commit("reset_name")},set_user:function(t,e){t.commit("set_user",e)},reset_user:function(t){t.commit("reset_user")},set_city_data:function(t,e){t.commit("set_city_data",e)},reset_city_data:function(t){t.commit("reset_city_data")},set_stock:function(t,e){t.commit("set_stock",e)},reset_stock:function(t){t.commit("reset_stock")}}}),g="https://citybuilder.thibaultdct.fr/api/user",h="https://citybuilder.thibaultdct.fr/api/city",v="https://citybuilder.thibaultdct.fr/api/stock";function _(){var t=this;o["a"].auth().signOut().then((function(){t.$router.replace("login")}))}function y(){return w.apply(this,arguments)}function w(){return w=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=o["a"].auth().currentUser.uid,t.next=3,u.a.get(g+"?firebase_id=eq."+e).then((function(t){return f.dispatch({type:l,user:t.data[0]})})).catch((function(t){return console.log(t)}));case 3:console.log(f.state.user);case 4:case"end":return t.stop()}}),t)}))),w.apply(this,arguments)}function b(){return k.apply(this,arguments)}function k(){return k=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.a.get(h+"?user=eq."+f.state.user.user_id).then((function(t){return f.dispatch({type:p,city:t.data[0]})})).catch((function(t){return console.log(t)}));case 2:case"end":return t.stop()}}),t)}))),k.apply(this,arguments)}function x(){return S.apply(this,arguments)}function S(){return S=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.a.get(v+"?city=eq."+f.state.city_data.city_id).then((function(t){return f.dispatch({type:d,stock:t.data[0]})})).catch((function(t){return console.log(t)}));case 2:case"end":return t.stop()}}),t)}))),S.apply(this,arguments)}function A(){return C.apply(this,arguments)}function C(){return C=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Saving data..."),console.log(f.state.city_data),t.next=4,u.a.put(h+"?city_id=eq."+f.state.city_data.city_id,f.state.city_data).catch((function(t){return console.log(t)}));case 4:console.log("Data saved.");case 5:case"end":return t.stop()}}),t)}))),C.apply(this,arguments)}var j=1,O=10,J={name:"App",components:{},beforeMount:function(){this.refresh()},mounted:function(){var t=this;window.setInterval((function(){t.incrementValues()}),1e3*j),window.setInterval((function(){console.log("Saving progression..."),A()}),1e3*O)},data:function(){return{user:{},city_data:{city_id:"",user:"",name:"",gold:0,energy:0,materials:0,population:0,gold_rate:0,energy_rate:0,materials_rate:0,population_rate:0},stock:{city:"",max_gold:0,max_materials:0,max_energy:0,max_population:0}}},methods:{incrementValues:function(){Object.assign(this.city_data,f.state.city_data),Object.assign(this.stock,f.state.stock),this.city_data.gold+=this.city_data.gold_rate,this.city_data.materials+=this.city_data.materials_rate,this.city_data.energy+=this.city_data.energy_rate,this.city_data.population+=this.city_data.population_rate,this.city_data.gold>=this.stock.max_gold&&(this.city_data.gold=this.stock.max_gold),this.city_data.materials>=this.stock.max_materials&&(this.city_data.materials=this.stock.max_materials),this.city_data.energy>=this.stock.max_energy&&(this.city_data.energy=this.stock.max_energy),this.city_data.population>=this.stock.max_population&&(this.city_data.population=this.stock.max_population),f.dispatch({type:p,city:this.city_data})},refresh:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Refreshing data..."),t.next=3,y();case 3:return t.next=5,b();case 5:return t.next=7,x();case 7:Object.assign(this.city_data,f.state.city_data),console.log("Data refreshed.");case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),saveProgression:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,A();case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),disconnect:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()}},E=J,I=(n("034f"),n("2877")),P=Object(I["a"])(E,r,i,!1,null,null,null),R=P.exports,N=n("9483");Object(N["a"])("".concat("/vue-app-2/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});n("45fc");var B=n("8c4f"),z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"global"},[n("div",{staticClass:"content"},[n("div",{staticClass:"glass"},[n("CityCard")],1)])])},H=[],U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"servercard"},[n("ul",[n("li",[0==t.changingName?n("span",[n("span",{staticClass:"cityName"},[t._v(t._s(t.city_data.name))])]):t._e(),1==t.changingName?n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"cityName",attrs:{placeholder:"Ma ville"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]):t._e()]),n("li",[n("span",{staticClass:"inventory"},[n("span",{staticClass:"gold_values"},[t._v("Or : "+t._s(t.city_data.gold)+" (+"+t._s(t.city_data.gold_rate)+"/s)")])]),n("span",{staticClass:"inventory"},[n("span",{staticClass:"materials_values"},[t._v("Matériaux : "+t._s(t.city_data.materials)+" (+"+t._s(t.city_data.materials_rate)+"/s)")])]),n("span",{staticClass:"inventory"},[n("span",{staticClass:"energy_values"},[t._v("Énergie : "+t._s(t.city_data.energy)+" (+"+t._s(t.city_data.energy_rate)+")")])]),n("span",{staticClass:"inventory"},[n("span",{staticClass:"population_values"},[t._v("Population : "+t._s(t.city_data.population)+" (+"+t._s(t.city_data.population_rate)+")")])])]),n("li",[n("br"),n("button",{on:{click:t.disconnect}},[t._v("Déconnexion")]),n("button",{on:{click:t.saveProgression}},[t._v("Sauvegarder")]),n("button",{on:{click:t.refresh}},[t._v("Rafraichir")]),0==t.changingName?n("button",{on:{click:t.changeName}},[t._v("Changer nom")]):t._e(),1==t.changingName?n("button",{on:{click:t.changeName}},[t._v("Valider nom")]):t._e()])])])},G=[],L={name:"CityCard",props:{},data:function(){return{name:"",changingName:!1,user:{},city_id:{},city_data:{city_id:"",user:"",gold:0,energy:0,materials:0,population:0,gold_rate:0,energy_rate:0,materials_rate:0,population_rate:0}}},mounted:function(){var t=this;window.setInterval((function(){t.refresh()}),1e3)},methods:{refresh:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object.assign(this.city_data,f.state.city_data);case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),saveProgression:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,A();case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),disconnect:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),changeName:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!1!==this.changingName){t.next=4;break}this.changingName=!0,t.next=9;break;case 4:return this.city_data.name=this.name,f.dispatch({type:p,city:this.city_data}),t.next=8,A();case 8:this.changingName=!1;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},Z=L,T=(n("dce4"),Object(I["a"])(Z,U,G,!1,null,"7bd056e9",null)),X=T.exports,D={name:"HelloWorld",props:{msg:String,city:String},components:{CityCard:X}},Y=D,V=(n("cc88"),Object(I["a"])(Y,z,H,!1,null,"5ff5ef62",null)),Q=V.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("h3",[t._v("Connexion")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"text",placeholder:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),n("br"),n("button",{on:{click:t.login}},[t._v("Connexion")]),n("p",[t._v("Vous n'avez pas encore de compte ? Vous pouvez en "),n("router-link",{attrs:{to:"/register"}},[t._v("créer un")])],1)])},F=[],M={name:"login",data:function(){return{form:{email:"",password:"",user:null}}},methods:{login:function(){var t=this;o["a"].auth().signInWithEmailAndPassword(this.email,this.password).then((function(e){t.user=e.user,t.$router.replace("home")})).catch((function(t){alert("Oops. "+t.message)}))}}},W=M,K=(n("950c"),Object(I["a"])(W,q,F,!1,null,"28d04460",null)),$=K.exports,tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"register"},[n("h3",[t._v("Inscription")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"text",placeholder:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),n("br"),n("button",{on:{click:t.register}},[t._v("Inscription")]),n("p",[t._v("Vous avez déjà un compte ? "),n("router-link",{attrs:{to:"/login"}},[t._v("Connectez vous")])],1)])},et=[],nt={name:"register",data:function(){return{form:{email:"",password:""}}},methods:{register:function(){var t=this;o["a"].auth().createUserWithEmailAndPassword(this.email,this.password).then((function(){alert("Votre compte a bien été créé !"),t.$router.replace("login")})).catch((function(t){alert("Oops. "+t.message)}))}}},at=nt,rt=(n("c904"),Object(I["a"])(at,tt,et,!1,null,"fa0cf2f4",null)),it=rt.exports;a["a"].use(B["a"]);var st=[{path:"*",redirect:"/login"},{path:"/",redirect:"/login"},{path:"/login",name:"login",component:$},{path:"/register",name:"register",component:it},{path:"/home",name:"home",component:Q,meta:{requiresAuth:!0}}],ot=new B["a"]({routes:st});ot.beforeEach((function(t,e,n){var a=o["a"].auth().currentUser,r=t.matched.some((function(t){return t.meta.requiresAuth}));r&&!a?n("login"):!r&&a?n("home"):n()}));var ct=ot;a["a"].config.productionTip=!1;var ut="",lt={apiKey:"AIzaSyCCjV8vvEbQ4jRr9blWI4alqg4m1wR6_Ic",authDomain:"citybuilder-f6445.firebaseapp.com",projectId:"citybuilder-f6445",storageBucket:"citybuilder-f6445.appspot.com",messagingSenderId:"498198501170",appId:"1:498198501170:web:39fe4287cdae3111fea92b",measurementId:"G-B0S75LJCKH"};o["a"].initializeApp(lt),o["a"].analytics(),o["a"].auth().onAuthStateChanged((function(){ut||(ut=new a["a"]({router:ct,store:f,render:function(t){return t(R)}}).$mount("#app"))}))},"85ec":function(t,e,n){},"950c":function(t,e,n){"use strict";n("a361")},"99bc":function(t,e,n){},a361:function(t,e,n){},c011:function(t,e,n){},c904:function(t,e,n){"use strict";n("99bc")},cc88:function(t,e,n){"use strict";n("c011")},cf05:function(t,e){t.exports="data:image/png;base64,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"},dce4:function(t,e,n){"use strict";n("03cf")}});
//# sourceMappingURL=app.b61f0e6c.js.map